<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	  'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>

<mapper namespace='com.ericsson.raso.sef.core.db.mapper.GroupMapper'>

	<resultMap id='GroupResult' type='Group'>
		<id property="groupId" column="group_Id" />
		<result property="groupName" column="group_Name" />
		<result property="description" column="description" />
	</resultMap>

	<resultMap id="ActorResult" type="Actor">
		<id property="actorName" column="actor_Name" />
	</resultMap>

	<resultMap id="identitiesResult" type="Actor">
		<collection property="identities" javaType="HashMap"
			column="identities" />
		<collection property="memberships" javaType="HashMap"
			column="memberships" />
	</resultMap>

	<resultMap id="getAllGroupsResult" type="Group">
		<collection property="groups" javaType="ArrayList" ofType="Group" />
	</resultMap>

	<insert id="addMember" parameterType="Actor">
		insert into
		group(actor_Name, identities, memberships)values
		(#{actor_Name},
		#{identities}, #{memberships})
	</insert>

	<select id="getAllGroups" resultMap="getAllGroupsResult">
		select * from group
	</select>

	<select id="getGroupById" resultMap="getGroupByIdResult"
		parameterType="String">
		select group_Name from Actor where actor_Id = #{actorId}
	</select>

	<delete id='removeMember' parameterType='int'>
		delete from group
		where
		user_Id=#{userId}
	</delete>

	<insert id="addGroup" parameterType="Group">
		insert into
		group(actor_Name,
		identities, memberships)values
		(#{actor_Name},
		#{identities},
		#{memberships})
	</insert>

	<delete id='removeGroup' parameterType="int">
		delete from group
		where
		group_Id=#{groupId}
	</delete>

</mapper>